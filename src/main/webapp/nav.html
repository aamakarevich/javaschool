<div id="topper">
    <nav class="navbar navbar-inverse navbar-fixed-top" id="top-nav">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar"
                        aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#">eCare Mobile</a>
            </div>
            <div id="navbar" class="navbar-collapse collapse" aria-expanded="false" style="height: 1px;">
                <ul class="nav navbar-nav">
                    <li id="nav_home"><a href="index.html">Home</a></li>
                    <li id="nav_users"><a href="users.html">Users</a></li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li id="nav_login"><a href="#" data-toggle="modal" data-target="#loginModal">Log in</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <div class="modal fade" id="loginModal" tabindex="-1" role="dialog" data-backdrop="static">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-body">
                    <form class="form-signin" onsubmit="return submitModal()">
                        <h2 class="form-signin-heading">Please sign in</h2>
                        <label for="inputEmail" class="sr-only">Email address</label>
                        <input type="email" id="inputEmail" class="form-control" placeholder="Email address" required=""
                               autofocus="">
                        <label for="inputPassword" class="sr-only">Password</label>
                        <input type="password" id="inputPassword" class="form-control" placeholder="Password" required="">
                        <button class="btn btn-lg btn-primary btn-block" type="submit" id="loginSubmit">Sign in</button>
                        <button class="btn btn-lg btn-default btn-block" type="button" id="loginCancel"
                                onclick="closeModal()">Cancel</button>
                        <div class="alert alert-info" id="loginError" role="alert" hidden="hidden">E-mail and password pair doesn't exist</div>
                        <div id="userData"></div>
                        <script src="../js/jquery.min.js" type="text/javascript"></script>
                        <script src="../js/jquery.rest.min.js" type="text/javascript"></script>
                        <script>
                            function closeModal() {
                                $("#loginModal").modal("hide");
                            }
                            function submitModal() {
                                client.login.read("?email=" + $("#inputEmail").val() + "&password=" + $("#inputPassword").val()).done(function (customer) {
                                    if(customer == null) {
                                        $("#loginError").fadeIn("slow");
                                    } else {
                                        $("#userData").empty();
                                        $("#userData").html("<script>var user=" + JSON.stringify(customer) + ";<\/script>");
                                        $("#loginError").hide();
                                        closeModal();
                                    }
                                });
                                return false;
                            }
                            function loadRights() {
                                client.login.read("").done(function (customer) {
                                    if(customer == null) {
                                        $("#userData").empty();
                                        $("#nav_login").show();
                                    } else {
                                        $("#userData").empty();
                                        $("#userData").html("<script>var user=" + JSON.stringify(customer) + ";<\/script>");
                                        $("#nav_login").hide();
                                    }
                                });
                            }
                        </script>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>